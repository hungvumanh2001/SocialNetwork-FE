{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../service/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../service/authentication.service\";\nimport * as i4 from \"ng-angular-popup\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction ChangePasswordComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41)(1, \"div\", 42);\n    i0.ɵɵtext(2, \" Kh\\u00F4ng \\u0111\\u01B0\\u1EE3c \\u0111\\u1EC3 tr\\u1ED1ng\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 42);\n    i0.ɵɵtext(4, \"Ph\\u1EA3i ch\\u1EE9a 6 k\\u00ED t\\u1EF1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 42);\n    i0.ɵɵtext(6, \"Ph\\u1EA3i \\u00EDt h\\u01A1n 32 k\\u00ED t\\u1EF1\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", !(ctx_r0.currentPassword == null ? null : ctx_r0.currentPassword.errors == null ? null : ctx_r0.currentPassword.errors[\"required\"]));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(ctx_r0.currentPassword == null ? null : ctx_r0.currentPassword.errors == null ? null : ctx_r0.currentPassword.errors[\"minlength\"]));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(ctx_r0.currentPassword == null ? null : ctx_r0.currentPassword.errors == null ? null : ctx_r0.currentPassword.errors[\"maxlength\"]));\n  }\n}\n\nfunction ChangePasswordComponent_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41)(1, \"div\", 42);\n    i0.ɵɵtext(2, \" Kh\\u00F4ng \\u0111\\u01B0\\u1EE3c \\u0111\\u1EC3 tr\\u1ED1ng\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 42);\n    i0.ɵɵtext(4, \"Ph\\u1EA3i ch\\u1EE9a 6 k\\u00ED t\\u1EF1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 42);\n    i0.ɵɵtext(6, \"Ph\\u1EA3i \\u00EDt h\\u01A1n 32 k\\u00ED t\\u1EF1\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", !(ctx_r1.password == null ? null : ctx_r1.password.errors == null ? null : ctx_r1.password.errors[\"required\"]));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(ctx_r1.password == null ? null : ctx_r1.password.errors == null ? null : ctx_r1.password.errors[\"minlength\"]));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(ctx_r1.password == null ? null : ctx_r1.password.errors == null ? null : ctx_r1.password.errors[\"maxlength\"]));\n  }\n}\n\nfunction ChangePasswordComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41)(1, \"div\", 42);\n    i0.ɵɵtext(2, \" Kh\\u00F4ng \\u0111\\u01B0\\u1EE3c \\u0111\\u1EC3 tr\\u1ED1ng\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 42);\n    i0.ɵɵtext(4, \"Ph\\u1EA3i ch\\u1EE9a 6 k\\u00ED t\\u1EF1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 42);\n    i0.ɵɵtext(6, \"Ph\\u1EA3i \\u00EDt h\\u01A1n 32 k\\u00ED t\\u1EF1\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", !(ctx_r2.confirmPassword == null ? null : ctx_r2.confirmPassword.errors == null ? null : ctx_r2.confirmPassword.errors[\"required\"]));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(ctx_r2.confirmPassword == null ? null : ctx_r2.confirmPassword.errors == null ? null : ctx_r2.confirmPassword.errors[\"minlength\"]));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", !(ctx_r2.confirmPassword == null ? null : ctx_r2.confirmPassword.errors == null ? null : ctx_r2.confirmPassword.errors[\"maxlength\"]));\n  }\n}\n\nexport let ChangePasswordComponent = /*#__PURE__*/(() => {\n  class ChangePasswordComponent {\n    constructor(userService, activatedRoute, router, authenticationService, toast) {\n      this.userService = userService;\n      this.activatedRoute = activatedRoute;\n      this.router = router;\n      this.authenticationService = authenticationService;\n      this.toast = toast; // @ts-ignore\n\n      this.id = parseInt(localStorage.getItem(\"ID\"));\n      this.username = localStorage.getItem(\"USERNAME\");\n      this.userForm = new FormGroup({\n        password: new FormControl(\"\", [Validators.required, Validators.minLength(6), Validators.maxLength(32)]),\n        confirmPassword: new FormControl(\"\", [Validators.required, Validators.minLength(6), Validators.maxLength(32)]),\n        currentPassword: new FormControl(\"\", [Validators.required, Validators.minLength(6), Validators.maxLength(32)])\n      });\n    }\n\n    changePassword(id) {\n      // @ts-ignore\n      if (this.authenticationService.login(this.username, this.userForm.value.currentPassword)) {\n        const user = {\n          password: this.userForm.value.password,\n          confirmPassword: this.userForm.value.confirmPassword\n        };\n\n        if (this.userForm.value.currentPassword != this.userForm.value.password) {\n          if (this.userForm.value.password == this.userForm.value.confirmPassword) {\n            // @ts-ignore\n            this.userService.updatePassword(id, user, this.userForm.value.currentPassword).subscribe(() => {\n              this.toast.success({\n                detail: \"Thông Báo\",\n                summary: \"Đổi mật khẩu thành công\",\n                duration: 3000\n              }); // @ts-ignore\n\n              document.getElementById(\"error\").style.visibility = \"none\"; // @ts-ignore\n\n              document.getElementById(\"fail\").style.display = \"none\";\n              document.getElementById(\"fail1\").style.display = \"none\";\n            }, error => {\n              // @ts-ignore\n              document.getElementById(\"error\").style.display = \"block\"; // @ts-ignore\n\n              document.getElementById(\"fail\").style.display = \"none\";\n              document.getElementById(\"fail1\").style.display = \"none\";\n            });\n          } else {\n            // @ts-ignore\n            document.getElementById(\"fail\").style.display = \"block\"; // @ts-ignore\n\n            document.getElementById(\"error\").style.display = \"none\";\n            document.getElementById(\"fail1\").style.display = \"none\";\n          }\n        } else {\n          document.getElementById(\"fail1\").style.display = \"block\";\n          document.getElementById(\"error\").style.display = \"none\";\n          document.getElementById(\"fail\").style.display = \"none\";\n        }\n      }\n    }\n\n    get currentPassword() {\n      return this.userForm.get('currentPassword');\n    }\n\n    get password() {\n      return this.userForm.get('password');\n    }\n\n    get confirmPassword() {\n      return this.userForm.get('confirmPassword');\n    }\n\n    ngOnInit() {}\n\n  }\n\n  ChangePasswordComponent.ɵfac = function ChangePasswordComponent_Factory(t) {\n    return new (t || ChangePasswordComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthenticationService), i0.ɵɵdirectiveInject(i4.NgToastService));\n  };\n\n  ChangePasswordComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChangePasswordComponent,\n    selectors: [[\"app-change-password\"]],\n    decls: 64,\n    vars: 6,\n    consts: [[1, \"container\"], [1, \"row\"], [1, \"col-lg-3\"], [1, \"d-flex\", \"align-items-center\", \"mb-4\", \"d-lg-none\"], [\"type\", \"button\", \"data-bs-toggle\", \"offcanvas\", \"data-bs-target\", \"#offcanvasNavbar\", \"aria-controls\", \"offcanvasNavbar\", 1, \"border-0\", \"bg-transparent\"], [1, \"btn\", \"btn-primary\", \"fw-bold\", \"fa-solid\", \"fa-sliders\"], [1, \"h6\", \"mb-0\", \"fw-bold\", \"d-lg-none\", \"ms-2\"], [1, \"navbar\", \"navbar-light\", \"navbar-expand-lg\", \"mx-0\"], [\"tabindex\", \"-1\", \"id\", \"offcanvasNavbar\", 1, \"offcanvas\", \"offcanvas-start\"], [1, \"offcanvas-header\"], [\"type\", \"button\", \"data-bs-dismiss\", \"offcanvas\", \"aria-label\", \"Close\", 1, \"btn-close\", \"text-reset\", \"ms-auto\"], [1, \"offcanvas-body\", \"p-0\"], [1, \"card\", \"w-100\"], [1, \"card-body\"], [1, \"nav\", \"nav-tabs\", \"nav-pills\", \"nav-pills-soft\", \"flex-column\", \"fw-bold\", \"gap-2\", \"border-0\"], [\"data-bs-dismiss\", \"offcanvas\", 1, \"nav-item\"], [\"data-bs-toggle\", \"tab\", \"routerLink\", \"/setting-user\", 1, \"nav-link\", \"d-flex\", \"mb-0\"], [\"src\", \"assets/assets/images/icon/person-outline-filled.svg\", 1, \"me-2\", \"h-20px\", \"fa-fw\"], [\"data-bs-toggle\", \"tab\", \"routerLink\", \"/setting-password\", 1, \"nav-link\", \"d-flex\", \"mb-0\", \"active\"], [1, \"me-2\", \"h-20px\", \"fa-fw\", \"fa-solid\", \"fa-key\"], [1, \"card-footer\", \"text-center\", \"py-2\"], [1, \"btn\", \"btn-link\", \"text-secondary\", \"btn-sm\", 3, \"routerLink\"], [1, \"col-lg-9\"], [1, \"tab-content\", \"py-0\", \"mb-0\"], [\"id\", \"nav-setting-tab-1\", 1, \"tab-pane\", \"show\", \"active\", \"fade\"], [1, \"card\", \"mb-4\"], [1, \"card\", 2, \"padding-right\", \"4%\", \"padding-left\", \"4%\"], [1, \"card-header\", \"border-0\", \"pb-0\"], [1, \"card-title\"], [1, \"row\", \"g-3\", 3, \"formGroup\", \"ngSubmit\"], [1, \"col-12\"], [1, \"form-label\"], [\"type\", \"password\", \"formControlName\", \"currentPassword\", 1, \"form-control\"], [\"style\", \"color: red\", 4, \"ngIf\"], [\"id\", \"error\", 2, \"display\", \"none\", \"color\", \"red\"], [\"type\", \"password\", \"id\", \"psw-input\", \"formControlName\", \"password\", 1, \"form-control\", \"fakepassword\"], [\"type\", \"password\", \"formControlName\", \"confirmPassword\", 1, \"form-control\"], [\"id\", \"fail\", 2, \"display\", \"none\", \"color\", \"red\"], [\"id\", \"fail1\", 2, \"display\", \"none\", \"color\", \"red\"], [1, \"col-12\", \"text-end\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mb-0\", 3, \"disabled\"], [2, \"color\", \"red\"], [3, \"hidden\"]],\n    template: function ChangePasswordComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"main\")(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"button\", 4);\n        i0.ɵɵelement(6, \"i\", 5);\n        i0.ɵɵelementStart(7, \"span\", 6);\n        i0.ɵɵtext(8, \"C\\u00E0i \\u0111\\u1EB7t\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(9, \"nav\", 7)(10, \"div\", 8)(11, \"div\", 9);\n        i0.ɵɵelement(12, \"button\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 11)(14, \"div\", 12)(15, \"div\", 13)(16, \"ul\", 14)(17, \"li\", 15)(18, \"a\", 16);\n        i0.ɵɵelement(19, \"img\", 17);\n        i0.ɵɵelementStart(20, \"span\");\n        i0.ɵɵtext(21, \"T\\u00E0i kho\\u1EA3n \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(22, \"li\", 15)(23, \"a\", 18);\n        i0.ɵɵelement(24, \"i\", 19);\n        i0.ɵɵelementStart(25, \"span\");\n        i0.ɵɵtext(26, \"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u \");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(27, \"div\", 20)(28, \"a\", 21);\n        i0.ɵɵtext(29, \"Quay l\\u1EA1i trang c\\u00E1 nh\\u00E2n \");\n        i0.ɵɵelementEnd()()()()()()();\n        i0.ɵɵelementStart(30, \"div\", 22)(31, \"div\", 23)(32, \"div\", 24)(33, \"div\", 25)(34, \"div\", 26)(35, \"div\", 27)(36, \"h5\", 28);\n        i0.ɵɵtext(37, \"Thay \\u0111\\u1ED5i m\\u1EADt kh\\u1EA9u\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(38, \"div\", 13)(39, \"form\", 29);\n        i0.ɵɵlistener(\"ngSubmit\", function ChangePasswordComponent_Template_form_ngSubmit_39_listener() {\n          return ctx.changePassword(ctx.id);\n        });\n        i0.ɵɵelementStart(40, \"div\", 30)(41, \"label\", 31);\n        i0.ɵɵtext(42, \"M\\u1EADt kh\\u1EA9u hi\\u1EC7n t\\u1EA1i\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"input\", 32);\n        i0.ɵɵtemplate(44, ChangePasswordComponent_div_44_Template, 7, 3, \"div\", 33);\n        i0.ɵɵelementStart(45, \"div\", 34);\n        i0.ɵɵtext(46, \"M\\u1EADt kh\\u1EA9u hi\\u1EC7n t\\u1EA1i kh\\u00F4ng \\u0111\\u00FAng \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(47, \"div\", 30)(48, \"label\", 31);\n        i0.ɵɵtext(49, \"M\\u1EADt kh\\u1EA9u m\\u1EDBi\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(50, \"input\", 35);\n        i0.ɵɵtemplate(51, ChangePasswordComponent_div_51_Template, 7, 3, \"div\", 33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"div\", 30)(53, \"label\", 31);\n        i0.ɵɵtext(54, \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(55, \"input\", 36);\n        i0.ɵɵtemplate(56, ChangePasswordComponent_div_56_Template, 7, 3, \"div\", 33);\n        i0.ɵɵelementStart(57, \"div\", 37);\n        i0.ɵɵtext(58, \"M\\u1EADt kh\\u1EA9u v\\u00E0 nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u ph\\u1EA3i gi\\u1ED1ng nhau \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(59, \"div\", 38);\n        i0.ɵɵtext(60, \"M\\u1EADt kh\\u1EA9u m\\u1EDBi kh\\u00F4ng \\u0111\\u01B0\\u1EE3c gi\\u1ED1ng m\\u1EADt kh\\u1EA9u c\\u0169 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(61, \"div\", 39)(62, \"button\", 40);\n        i0.ɵɵtext(63, \"Thay \\u0111\\u1ED5i\");\n        i0.ɵɵelementEnd()()()()()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(28);\n        i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/\", ctx.id, \"\");\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"formGroup\", ctx.userForm);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.currentPassword == null ? null : ctx.currentPassword.valid) && (ctx.currentPassword == null ? null : ctx.currentPassword.dirty));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.password == null ? null : ctx.password.valid) && (ctx.password == null ? null : ctx.password.dirty));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.confirmPassword == null ? null : ctx.confirmPassword.valid) && (ctx.confirmPassword == null ? null : ctx.confirmPassword.dirty));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"disabled\", !ctx.userForm.valid);\n      }\n    },\n    dependencies: [i5.NgIf, i2.RouterLinkWithHref, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName]\n  });\n  return ChangePasswordComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}