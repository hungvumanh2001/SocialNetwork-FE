{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Hp/IdeaProjects/SocialNetwork-FE/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl } from \"@angular/forms\";\nimport { finalize } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../service/status.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../service/relationship.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"ng-angular-popup\";\nimport * as i6 from \"../../../service/like-status.service\";\nimport * as i7 from \"../../../service/image.service\";\nimport * as i8 from \"@angular/fire/compat/storage\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"../status-create/status-create.component\";\n\nfunction StatusNewFeedComponent_div_48_div_1_p_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 87);\n    i0.ɵɵelement(1, \"i\", 88);\n    i0.ɵɵtext(2, \" C\\u00F4ng khai\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StatusNewFeedComponent_div_48_div_1_p_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 87);\n    i0.ɵɵelement(1, \"i\", 89);\n    i0.ɵɵtext(2, \" Ch\\u1EC9 m\\u00ECnh t\\u00F4i\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StatusNewFeedComponent_div_48_div_1_p_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 87);\n    i0.ɵɵelement(1, \"i\", 90);\n    i0.ɵɵtext(2, \" B\\u1EA1n b\\u00E8\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StatusNewFeedComponent_div_48_div_1_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 91)(1, \"a\", 92);\n    i0.ɵɵelement(2, \"i\", 93);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 94)(4, \"div\")(5, \"li\")(6, \"button\", 95);\n    i0.ɵɵlistener(\"click\", function StatusNewFeedComponent_div_48_div_1_div_18_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const s_r3 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.getStatus(s_r3.id));\n    });\n    i0.ɵɵelement(7, \"i\", 96);\n    i0.ɵɵtext(8, \" S\\u1EEDa b\\u00E0i \\u0111\\u0103ng \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"li\");\n    i0.ɵɵelement(10, \"hr\", 97);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"li\")(12, \"button\", 98);\n    i0.ɵɵlistener(\"click\", function StatusNewFeedComponent_div_48_div_1_div_18_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const s_r3 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.getStatus(s_r3.id));\n    });\n    i0.ɵɵelement(13, \"i\", 99);\n    i0.ɵɵtext(14, \" X\\u00F3a b\\u00E0i \\u0111\\u0103ng \");\n    i0.ɵɵelementEnd()()()()();\n  }\n}\n\nfunction StatusNewFeedComponent_div_48_div_1_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 100);\n    i0.ɵɵelement(1, \"img\", 101);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const img_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", img_r19.image, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction StatusNewFeedComponent_div_48_div_1_li_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 20)(1, \"a\", 102);\n    i0.ɵɵlistener(\"click\", function StatusNewFeedComponent_div_48_div_1_li_27_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      const s_r3 = ctx_r21.$implicit;\n      const i_r4 = ctx_r21.index;\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.likeStatus(s_r3.id, i_r4));\n    });\n    i0.ɵɵelement(2, \"i\", 103);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const i_r4 = i0.ɵɵnextContext(2).index;\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Th\\u00EDch (\", ctx_r11.statuses[2][i_r4], \")\");\n  }\n}\n\nfunction StatusNewFeedComponent_div_48_div_1_li_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 20)(1, \"a\", 104);\n    i0.ɵɵlistener(\"click\", function StatusNewFeedComponent_div_48_div_1_li_28_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      const s_r3 = ctx_r25.$implicit;\n      const i_r4 = ctx_r25.index;\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.likeStatus(s_r3.id, i_r4));\n    });\n    i0.ɵɵelement(2, \"i\", 103);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const i_r4 = i0.ɵɵnextContext(2).index;\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Th\\u00EDch (\", ctx_r12.statuses[2][i_r4], \")\");\n  }\n}\n\nfunction StatusNewFeedComponent_div_48_div_1_span_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r4 = i0.ɵɵnextContext(2).index;\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"(\", ctx_r13.statuses[3][i_r4], \")\");\n  }\n}\n\nfunction StatusNewFeedComponent_div_48_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 70)(2, \"div\", 71)(3, \"div\", 72)(4, \"div\", 73)(5, \"a\", 74);\n    i0.ɵɵelement(6, \"img\", 39);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\")(8, \"div\", 75)(9, \"h6\", 76)(10, \"a\", 14);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"span\", 77);\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(15, StatusNewFeedComponent_div_48_div_1_p_15_Template, 3, 0, \"p\", 78);\n    i0.ɵɵtemplate(16, StatusNewFeedComponent_div_48_div_1_p_16_Template, 3, 0, \"p\", 78);\n    i0.ɵɵtemplate(17, StatusNewFeedComponent_div_48_div_1_p_17_Template, 3, 0, \"p\", 78);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(18, StatusNewFeedComponent_div_48_div_1_div_18_Template, 15, 0, \"div\", 79);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 80)(20, \"p\", 14);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 81)(23, \"div\", 44);\n    i0.ɵɵtemplate(24, StatusNewFeedComponent_div_48_div_1_div_24_Template, 2, 1, \"div\", 82);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(25, \"br\");\n    i0.ɵɵelementStart(26, \"ul\", 83);\n    i0.ɵɵtemplate(27, StatusNewFeedComponent_div_48_div_1_li_27_Template, 4, 1, \"li\", 84);\n    i0.ɵɵtemplate(28, StatusNewFeedComponent_div_48_div_1_li_28_Template, 4, 1, \"li\", 84);\n    i0.ɵɵelementStart(29, \"li\", 20)(30, \"a\", 85);\n    i0.ɵɵelement(31, \"i\", 86);\n    i0.ɵɵtext(32, \"B\\u00ECnh Lu\\u1EADn \");\n    i0.ɵɵtemplate(33, StatusNewFeedComponent_div_48_div_1_span_33_Template, 2, 1, \"span\", 69);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r29 = i0.ɵɵnextContext();\n    const s_r3 = ctx_r29.$implicit;\n    const i_r4 = ctx_r29.index;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵpropertyInterpolate(\"src\", s_r3.owner.avatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/\", s_r3.owner.id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", s_r3.owner.fullname, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(14, 16, s_r3.createAt, \"hh:mm dd/MM/yyyy\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", s_r3.status == 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", s_r3.status == 2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", s_r3.status == 3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.currentId == s_r3.owner.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/status/\", s_r3.id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(s_r3.content);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/status/\", s_r3.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.statuses[1][i_r4]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !s_r3.isLiked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", s_r3.isLiked);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/status/\", s_r3.id, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.currentId == s_r3.owner.id);\n  }\n}\n\nfunction StatusNewFeedComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 68);\n    i0.ɵɵtemplate(1, StatusNewFeedComponent_div_48_div_1_Template, 34, 19, \"div\", 69);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const s_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r0.currentId != s_r3.owner.id && s_r3.status == 2));\n  }\n}\n\nfunction StatusNewFeedComponent_img_67_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 105);\n    i0.ɵɵlistener(\"click\", function StatusNewFeedComponent_img_67_Template_img_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r33);\n      const i_r31 = restoredCtx.index;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.deleteImg(i_r31));\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const img_r30 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"src\", img_r30, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport class StatusNewFeedComponent {\n  constructor(statusService, activatedRoute, relationshipService, router, fb, toast, likeService, imageService, storage) {\n    this.statusService = statusService;\n    this.activatedRoute = activatedRoute;\n    this.relationshipService = relationshipService;\n    this.router = router;\n    this.fb = fb;\n    this.toast = toast;\n    this.likeService = likeService;\n    this.imageService = imageService;\n    this.storage = storage;\n    this.imgs = [];\n    this.selectedImages = [];\n    this.statusForm = this.fb.group({\n      content: new FormControl(''),\n      status: new FormControl('')\n    });\n    this.statusz = {\n      owner: {\n        id: 0,\n        username: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        email: \"\",\n        phone: \"\",\n        birthday: \"\",\n        fullname: \"\",\n        avatar: \"\",\n        address: \"\",\n        hobby: \"\",\n        enabled: false,\n        roles: [undefined]\n      },\n      content: \"\",\n      createAt: \"\",\n      id: 0,\n      status: \"\"\n    };\n  }\n\n  ngOnInit() {\n    this.avatar = localStorage.getItem(\"AVATAR\");\n    this.fullname = localStorage.getItem(\"FULLNAME\");\n    this.currentId = localStorage.getItem(\"ID\");\n    this.activatedRoute.paramMap.subscribe(param => {\n      // this.id = param.get(\"id\");\n      this.statusService.findAll(this.currentId).subscribe(status => {\n        this.statuses = status;\n\n        for (let i = 0; i < this.statuses[0].length; i++) {\n          this.likeService.check(this.statuses[0][i].id, this.currentId).subscribe(data => {\n            this.statuses[0][i].isLiked = data;\n          }, error => console.log(\"err\", error));\n        }\n      }, error => {\n        console.log(error);\n      });\n    }, error => {\n      console.log(error);\n    });\n    this.statusService.findAllByOwnerId(this.currentId).subscribe(status => {\n      this.numberStatusOwner = status;\n    });\n    this.relationshipService.findAllFriendListByUserId(this.currentId).subscribe(data => {\n      this.numberFriend = data;\n      this.relationship = data;\n    });\n  }\n\n  getStatus(id) {\n    this.statusService.getById(id).subscribe(result => {\n      this.statusz = result[0][0];\n\n      for (let i = 0; i < result[1].length; i++) {\n        this.imgs.push(result[1][i].image);\n      }\n\n      console.log(this.imgs);\n    }, error => {\n      console.log(error);\n    });\n  }\n\n  resetValue() {\n    this.imgs = [];\n  }\n\n  editStatus() {\n    // @ts-ignore\n    const status = {\n      content: this.statusForm.value.content,\n      status: this.statusForm.value.status\n    };\n    console.log(status);\n\n    if (status.content == \"\" && this.imgs.length == 0) {} else {\n      // @ts-ignore\n      this.statusService.edit(this.statusz.id, status).subscribe(data => {\n        this.toast.success({\n          detail: \"Thông Báo\",\n          summary: \"Sửa bài đăng thành công\",\n          duration: 3000\n        });\n        window.setTimeout(function () {\n          location.reload();\n        }, 1500);\n\n        for (let item of this.imgs) {\n          const images = {\n            status: {\n              id: data.id\n            },\n            image: item\n          };\n          this.imageService.save(images).subscribe(() => {});\n        }\n\n        this.statusForm.reset();\n        this.imgs = []; // this.reloadCurrentRoute()\n      }, error => {\n        console.log(error);\n      });\n    }\n  }\n\n  deleteImg(i) {\n    this.imgs.splice(i, 1);\n  }\n\n  reloadCurrentRoute() {\n    let currentUrl = this.router.url;\n    this.router.navigateByUrl('/', {\n      skipLocationChange: true\n    }).then(() => {\n      this.router.navigate([currentUrl]);\n    });\n  }\n\n  delete(id) {\n    this.statusService.delete(id).subscribe(() => {\n      this.toast.success({\n        detail: \"Thông Báo\",\n        summary: \"Xóa bài đăng thành công\",\n        duration: 3000\n      });\n      this.reloadCurrentRoute();\n    }, e => {\n      this.toast.error({\n        detail: \"Thông Báo\",\n        summary: \"Sửa bài đăng thất bại\",\n        duration: 3000\n      });\n      console.log(e);\n    });\n  }\n\n  likeStatus(id, index) {\n    this.likeService.likeStatus(id, this.currentId).subscribe(data => {\n      this.likeStatuses = data;\n      this.statuses[0][index].isLiked = !this.statuses[0][index].isLiked;\n\n      if (this.statuses[0][index].isLiked == true) {\n        this.statuses[2][index] += 1;\n      } else {\n        this.statuses[2][index] -= 1;\n      }\n    });\n  } // upload ảnh\n\n\n  upload() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.newSelectedImages.length !== 0) {\n        for (let i = 0; i < _this.newSelectedImages.length; i++) {\n          let selectedImage = _this.newSelectedImages[i];\n          var n = Date.now();\n          const filePath = `RoomsImages/${n}`;\n\n          const fileRef = _this.storage.ref(filePath);\n\n          yield _this.storage.upload(filePath, selectedImage).snapshotChanges().pipe(finalize(() => {\n            fileRef.getDownloadURL().subscribe(url => {\n              console.log(url);\n\n              _this.imgs.push(url);\n            });\n          })).subscribe(() => {});\n        }\n      }\n    })();\n  } // Chọn ảnh\n\n\n  selectFile(event) {\n    if (event.target.files && event.target.files[0]) {\n      const reader = new FileReader();\n      reader.readAsDataURL(event.target.files[0]);\n      this.newSelectedImages = event.target.files;\n\n      for (let i = 0; i < event.target.files.length; i++) {\n        console.log(event.target.files[i]);\n        this.selectedImages.push(event.target.files[i]);\n      } //bi bo? qua\n\n\n      this.upload();\n    } else {\n      this.selectedImages = [];\n    }\n  }\n\n}\n\nStatusNewFeedComponent.ɵfac = function StatusNewFeedComponent_Factory(t) {\n  return new (t || StatusNewFeedComponent)(i0.ɵɵdirectiveInject(i1.StatusService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.RelationshipService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.NgToastService), i0.ɵɵdirectiveInject(i6.LikeStatusService), i0.ɵɵdirectiveInject(i7.ImageService), i0.ɵɵdirectiveInject(i8.AngularFireStorage));\n};\n\nStatusNewFeedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: StatusNewFeedComponent,\n  selectors: [[\"app-status-new-feed\"]],\n  decls: 103,\n  vars: 14,\n  consts: [[\"xmlns\", \"http://www.w3.org/1999/html\"], [1, \"container\"], [1, \"row\", \"g-4\"], [1, \"col-lg-3\"], [1, \"navbar\", \"navbar-expand-lg\", \"mx-0\"], [\"tabindex\", \"-1\", \"id\", \"offcanvasSideNavbar\", 1, \"offcanvas\", \"offcanvas-start\"], [1, \"offcanvas-header\"], [\"type\", \"button\", \"data-bs-dismiss\", \"offcanvas\", \"aria-label\", \"Close\", 1, \"btn-close\", \"text-reset\", \"ms-auto\"], [1, \"offcanvas-body\", \"d-block\", \"px-2\", \"px-lg-0\"], [1, \"card\", \"overflow-hidden\"], [1, \"h-50px\", 2, \"background-position\", \"center\", \"background-size\", \"cover\", \"background-repeat\", \"no-repeat\"], [1, \"card-body\", \"pt-0\"], [1, \"text-center\"], [1, \"avatar\", \"avatar-lg\", \"mt-n5\", \"mb-3\"], [3, \"routerLink\"], [\"alt\", \"\", 1, \"avatar-img\", \"rounded\", \"border\", \"border-white\", \"border-3\", 3, \"src\"], [1, \"mb-0\"], [1, \"hstack\", \"gap-2\", \"gap-xl-3\", \"justify-content-center\", 2, \"margin-top\", \"5%\"], [1, \"vr\"], [1, \"nav\", \"nav-link-secondary\", \"flex-column\", \"fw-bold\", \"gap-2\"], [1, \"nav-item\"], [\"routerLink\", \"/\", 1, \"nav-link\"], [\"src\", \"assets/assets/images/icon/home-outline-filled.svg\", \"alt\", \"\", 1, \"me-2\", \"h-20px\", \"fa-fw\"], [1, \"nav-link\", 3, \"routerLink\"], [\"src\", \"assets/assets/images/icon/person-outline-filled.svg\", \"alt\", \"\", 1, \"me-2\", \"h-20px\", \"fa-fw\"], [1, \"card-footer\", \"text-center\", \"py-2\"], [1, \"btn\", \"btn-link\", \"btn-sm\", 3, \"routerLink\"], [1, \"col-md-8\", \"col-lg-4\", \"vstack\", \"gap-4\"], [\"class\", \"card\", \"style\", \"margin-top: -2%\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"updateStatusModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"exampleModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"modal-dialog\", \"modal-dialog-centered\", \"modal-dialog-scrollable\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"modalLabelCreateFeed\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\", 3, \"click\"], [1, \"modal-body\"], [1, \"d-flex\", \"mb-3\"], [1, \"avatar\", \"avatar-xs\", \"me-2\"], [\"alt\", \"\", 1, \"avatar-img\", \"rounded-circle\", 3, \"src\"], [1, \"w-100\"], [\"rows\", \"4\", \"placeholder\", \"N\\u1ED9i dung ch\\u1EC9nh s\\u1EEDa\", \"formControlName\", \"content\", 1, \"form-control\", \"pe-4\", \"fs-3\", \"lh-1\", \"border-0\", 3, \"ngModel\"], [1, \"hstack\", \"gap-2\"], [1, \"card-body\", \"position-relative\", \"pt-0\"], [1, \"row\", \"g-2\"], [1, \"col-12\", 2, \"height\", \"150px\", \"overflow\", \"auto\"], [\"class\", \"rounded img-fluid1 col-4\", \"alt\", \"\", \"style\", \"height: 100%\", 3, \"src\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"custom-file\"], [\"type\", \"file\", \"multiple\", \"\", \"name\", \"image\", \"autocomplete\", \"off\", \"id\", \"inputGroupFile03\", \"accept\", \"image/png, image/gif, image/jpeg\", 1, \"custom-file-input\", 3, \"change\"], [\"userPhoto\", \"\"], [\"for\", \"inputGroupFile03\", 1, \"custom-file-label\"], [\"data-bs-toggle\", \"tooltip\", \"data-bs-placement\", \"top\", \"title\", \"Photo\", 1, \"icon-md\", \"bg-success\", \"bg-opacity-10\", \"text-success\", \"rounded-circle\"], [1, \"bi\", \"bi-image-fill\"], [1, \"modal-footer\", \"row\", \"justify-content-between\"], [1, \"col-lg-4\"], [\"id\", \"oselect\", \"data-position\", \"top\", \"data-search-enabled\", \"false\", \"formControlName\", \"status\", 1, \"form-select\", \"js-choice\", 3, \"ngModel\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [1, \"col-lg-7\", \"text-sm-end\"], [\"type\", \"submit\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-primary-soft\"], [\"id\", \"modalDeleteStatus\", \"tabindex\", \"-1\", \"aria-labelledby\", \"modalLabelUnfriend\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"id\", \"modalLabelUnfriend\", 2, \"text-align\", \"center\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-footer\"], [1, \"col-lg-8\", \"text-sm-end\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-primary-soft\", \"me-2\", 3, \"click\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn\", \"btn-danger-soft\"], [1, \"card\", 2, \"margin-top\", \"-2%\"], [4, \"ngIf\"], [1, \"card-header\", \"border-0\", \"pb-0\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-between\"], [1, \"d-flex\", \"align-items-center\"], [1, \"avatar\", \"avatar-story\", \"me-2\"], [\"href\", \"#!\"], [1, \"nav\", \"nav-divider\"], [1, \"nav-item\", \"card-title\", \"mb-0\"], [1, \"nav-item\", \"small\"], [\"class\", \"mb-0 small\", 4, \"ngIf\"], [\"class\", \"dropdown\", 4, \"ngIf\"], [1, \"card-body\"], [1, \"card-body\", \"position-relative\", \"pt-0\", 3, \"routerLink\"], [\"class\", \"col-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"nav\", \"nav-pills\", \"nav-pills-light\", \"nav-fill\", \"nav-stack\", \"small\", \"border-top\", \"py-1\"], [\"class\", \"nav-item\", 4, \"ngIf\"], [1, \"nav-link\", \"mb-0\", 3, \"routerLink\"], [1, \"bi\", \"bi-chat-fill\", \"pe-1\"], [1, \"mb-0\", \"small\"], [1, \"fa-solid\", \"fa-globe\"], [1, \"fa-solid\", \"fa-lock\"], [1, \"fa-solid\", \"fa-user-group\"], [1, \"dropdown\"], [\"href\", \"#\", \"id\", \"cardFeedAction1\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"text-secondary\", \"btn\", \"btn-secondary-soft-hover\", \"py-1\", \"px-2\"], [1, \"bi\", \"bi-three-dots\"], [\"aria-labelledby\", \"cardFeedAction1\", 1, \"dropdown-menu\", \"dropdown-menu-end\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#updateStatusModal\", 1, \"dropdown-item\", 3, \"click\"], [1, \"bi\", \"bi-pencil-fill\", \"pe-1\"], [1, \"dropdown-divider\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#modalDeleteStatus\", 1, \"dropdown-item\", 3, \"click\"], [1, \"fa-solid\", \"fa-trash\"], [1, \"col-4\"], [1, \"rounded\", \"img-fluid\", 3, \"src\"], [1, \"nav-link\", \"mb-0\", 3, \"click\"], [1, \"bi\", \"bi-heart\", \"pe-1\"], [1, \"nav-link\", \"mb-0\", 2, \"color\", \"red\", 3, \"click\"], [\"alt\", \"\", 1, \"rounded\", \"img-fluid1\", \"col-4\", 2, \"height\", \"100%\", 3, \"src\", \"click\"]],\n  template: function StatusNewFeedComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"main\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"nav\", 4)(5, \"div\", 5)(6, \"div\", 6);\n      i0.ɵɵelement(7, \"button\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 8)(9, \"div\", 9);\n      i0.ɵɵelement(10, \"div\", 10);\n      i0.ɵɵelementStart(11, \"div\", 11)(12, \"div\", 12)(13, \"div\", 13)(14, \"a\", 14);\n      i0.ɵɵelement(15, \"img\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"h5\", 16)(17, \"a\", 14);\n      i0.ɵɵtext(18);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"div\", 17)(20, \"div\")(21, \"h6\", 16);\n      i0.ɵɵtext(22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"small\");\n      i0.ɵɵtext(24, \"S\\u1ED1 b\\u00E0i \\u0111\\u0103ng\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(25, \"div\", 18);\n      i0.ɵɵelementStart(26, \"div\")(27, \"h6\", 16);\n      i0.ɵɵtext(28);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"small\");\n      i0.ɵɵtext(30, \"B\\u1EA1n b\\u00E8\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelement(31, \"hr\");\n      i0.ɵɵelementStart(32, \"ul\", 19)(33, \"li\", 20)(34, \"a\", 21);\n      i0.ɵɵelement(35, \"img\", 22);\n      i0.ɵɵelementStart(36, \"span\");\n      i0.ɵɵtext(37, \"Trang ch\\u1EE7 \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(38, \"li\", 20)(39, \"a\", 23);\n      i0.ɵɵelement(40, \"img\", 24);\n      i0.ɵɵelementStart(41, \"span\");\n      i0.ɵɵtext(42, \"B\\u1EA1n b\\u00E8 \");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(43, \"div\", 25)(44, \"a\", 26);\n      i0.ɵɵtext(45, \"\\u0110\\u1EBFn trang c\\u00E1 nh\\u00E2n \");\n      i0.ɵɵelementEnd()()()()()()();\n      i0.ɵɵelementStart(46, \"div\", 27);\n      i0.ɵɵelement(47, \"app-status-create\");\n      i0.ɵɵtemplate(48, StatusNewFeedComponent_div_48_Template, 2, 1, \"div\", 28);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(49, \"div\", 29)(50, \"form\", 30);\n      i0.ɵɵlistener(\"ngSubmit\", function StatusNewFeedComponent_Template_form_ngSubmit_50_listener() {\n        return ctx.editStatus();\n      });\n      i0.ɵɵelementStart(51, \"div\", 31)(52, \"div\", 32)(53, \"div\", 33)(54, \"h5\", 34);\n      i0.ɵɵtext(55, \"S\\u1EEDa b\\u00E0i \\u0111\\u0103ng\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(56, \"button\", 35);\n      i0.ɵɵlistener(\"click\", function StatusNewFeedComponent_Template_button_click_56_listener() {\n        return ctx.resetValue();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(57, \"div\", 36)(58, \"div\", 37)(59, \"div\", 38);\n      i0.ɵɵelement(60, \"img\", 39);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(61, \"form\", 40);\n      i0.ɵɵelement(62, \"textarea\", 41);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(63, \"div\", 42)(64, \"div\", 43)(65, \"div\", 44)(66, \"div\", 45);\n      i0.ɵɵtemplate(67, StatusNewFeedComponent_img_67_Template, 1, 1, \"img\", 46);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelement(68, \"br\");\n      i0.ɵɵelementStart(69, \"div\", 47)(70, \"input\", 48, 49);\n      i0.ɵɵlistener(\"change\", function StatusNewFeedComponent_Template_input_change_70_listener($event) {\n        return ctx.selectFile($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"label\", 50)(73, \"span\", 51);\n      i0.ɵɵelement(74, \"i\", 52);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(75, \"div\", 53)(76, \"div\", 54)(77, \"select\", 55)(78, \"option\", 56);\n      i0.ɵɵtext(79, \"C\\u00F4ng khai\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(80, \"option\", 57);\n      i0.ɵɵtext(81, \"Ch\\u1EC9 m\\u00ECnh t\\u00F4i\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(82, \"option\", 58);\n      i0.ɵɵtext(83, \"B\\u1EA1n b\\u00E8\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(84, \"div\", 59)(85, \"button\", 60);\n      i0.ɵɵtext(86, \"L\\u01B0u thay \\u0111\\u1ED5i\");\n      i0.ɵɵelementEnd()()()()()()();\n      i0.ɵɵelementStart(87, \"div\", 61)(88, \"div\", 31)(89, \"div\", 32)(90, \"div\", 33)(91, \"h3\", 62);\n      i0.ɵɵtext(92, \"B\\u1EA1n mu\\u1ED1n x\\u00F3a b\\u00E0i \\u0111\\u0103ng\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(93, \"button\", 63);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(94, \"div\", 36)(95, \"h6\");\n      i0.ɵɵtext(96, \"B\\u1EA1n c\\u00F3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\u00F3a b\\u00E0i \\u0111\\u0103ng kh\\u00F4ng?\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(97, \"div\", 64)(98, \"div\", 65)(99, \"button\", 66);\n      i0.ɵɵlistener(\"click\", function StatusNewFeedComponent_Template_button_click_99_listener() {\n        return ctx.delete(ctx.statusz.id);\n      });\n      i0.ɵɵtext(100, \" X\\u00E1c nh\\u1EADn \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(101, \"button\", 67);\n      i0.ɵɵtext(102, \"H\\u1EE7y \");\n      i0.ɵɵelementEnd()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/\", ctx.currentId, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.avatar, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/\", ctx.currentId, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(ctx.fullname);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.numberStatusOwner[0].length);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.numberFriend.length);\n      i0.ɵɵadvance(11);\n      i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/\", ctx.currentId, \"/list-friend\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/\", ctx.currentId, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.statuses[0]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.statusForm);\n      i0.ɵɵadvance(10);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.statusz.owner.avatar, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate(\"ngModel\", ctx.statusz.content);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.imgs);\n      i0.ɵɵadvance(10);\n      i0.ɵɵpropertyInterpolate(\"ngModel\", ctx.statusz.status);\n    }\n  },\n  dependencies: [i9.NgForOf, i9.NgIf, i2.RouterLink, i2.RouterLinkWithHref, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i10.StatusCreateComponent, i9.DatePipe],\n  styles: [\".img-fluid[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  height: 200px\\r\\n}\\r\\n\\r\\n.card[_ngcontent-%COMP%] {\\r\\n  margin-top: 1%;\\r\\n}\\r\\n\\r\\n.card-body[_ngcontent-%COMP%] {\\r\\n  padding-bottom: 0;\\r\\n}\\r\\n\\r\\n#inputGroupFile03[_ngcontent-%COMP%]{\\r\\n  display: none;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXR1cy1uZXctZmVlZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVztFQUNYO0FBQ0Y7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsYUFBYTtBQUNmIiwiZmlsZSI6InN0YXR1cy1uZXctZmVlZC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmltZy1mbHVpZCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAyMDBweFxyXG59XHJcblxyXG4uY2FyZCB7XHJcbiAgbWFyZ2luLXRvcDogMSU7XHJcbn1cclxuXHJcbi5jYXJkLWJvZHkge1xyXG4gIHBhZGRpbmctYm90dG9tOiAwO1xyXG59XHJcblxyXG4jaW5wdXRHcm91cEZpbGUwM3tcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","finalize","i0","StatusNewFeedComponent","constructor","statusService","activatedRoute","relationshipService","router","fb","toast","likeService","imageService","storage","group","content","status","owner","id","username","password","confirmPassword","email","phone","birthday","fullname","avatar","address","hobby","enabled","roles","undefined","createAt","ngOnInit","localStorage","getItem","currentId","paramMap","subscribe","param","findAll","statuses","i","length","check","data","isLiked","error","console","log","findAllByOwnerId","numberStatusOwner","findAllFriendListByUserId","numberFriend","relationship","getStatus","getById","result","statusz","imgs","push","image","resetValue","editStatus","statusForm","value","edit","success","detail","summary","duration","window","setTimeout","location","reload","item","images","save","reset","deleteImg","splice","reloadCurrentRoute","currentUrl","url","navigateByUrl","skipLocationChange","then","navigate","delete","e","likeStatus","index","likeStatuses","upload","newSelectedImages","selectedImage","n","Date","now","filePath","fileRef","ref","snapshotChanges","pipe","getDownloadURL","selectFile","event","target","files","reader","FileReader","readAsDataURL","selectedImages","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Hp\\IdeaProjects\\SocialNetwork-FE\\src\\app\\component\\status\\status-new-feed\\status-new-feed.component.ts","C:\\Users\\Hp\\IdeaProjects\\SocialNetwork-FE\\src\\app\\component\\status\\status-new-feed\\status-new-feed.component.html"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\r\nimport {StatusService} from \"../../../service/status.service\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\nimport {FormBuilder, FormControl, FormGroup} from \"@angular/forms\";\r\nimport {RelationshipService} from \"../../../service/relationship.service\";\r\nimport {Status} from \"../../../model/status\";\r\nimport {NgToastService} from \"ng-angular-popup\";\r\nimport {LikeStatusService} from \"../../../service/like-status.service\";\r\nimport {ImageService} from \"../../../service/image.service\";\r\nimport {finalize} from \"rxjs\";\r\nimport {AngularFireStorage} from \"@angular/fire/compat/storage\";\r\n\r\n@Component({\r\n  selector: 'app-status-new-feed',\r\n  templateUrl: './status-new-feed.component.html',\r\n  styleUrls: ['./status-new-feed.component.css']\r\n})\r\nexport class StatusNewFeedComponent implements OnInit {\r\n  statuses: any;\r\n  currentId: any;\r\n  id: any;\r\n  avatar: any\r\n  fullname: any;\r\n  relationship: any;\r\n  numberStatusOwner: any;\r\n  numberFriend: any;\r\n  likeStatuses: any\r\n  imgs: any [] = [];\r\n  newSelectedImages: [];\r\n  selectedImages: any[] = [];\r\n  statusForm: FormGroup = this.fb.group({\r\n      content: new FormControl(''),\r\n      status: new FormControl(''),\r\n    }\r\n  )\r\n  statusz: Status = {\r\n    owner: {\r\n      id: 0,\r\n      username: \"\",\r\n      password: \"\",\r\n      confirmPassword: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      birthday: \"\",\r\n      fullname: \"\",\r\n      avatar: \"\",\r\n      address: \"\",\r\n      hobby: \"\",\r\n      enabled: false,\r\n      roles: [undefined]\r\n    },\r\n    content: \"\",\r\n    createAt: \"\",\r\n    id: 0,\r\n    status: \"\"\r\n  };\r\n\r\n  constructor(private statusService: StatusService, private activatedRoute: ActivatedRoute,\r\n              private relationshipService: RelationshipService, private router: Router,\r\n              private fb: FormBuilder, private toast: NgToastService,\r\n              private likeService: LikeStatusService,\r\n              private imageService: ImageService,\r\n              private storage: AngularFireStorage) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.avatar = localStorage.getItem(\"AVATAR\")\r\n    this.fullname = localStorage.getItem(\"FULLNAME\")\r\n    this.currentId = localStorage.getItem(\"ID\")\r\n    this.activatedRoute.paramMap.subscribe((param) => {\r\n      // this.id = param.get(\"id\");\r\n      this.statusService.findAll(this.currentId).subscribe((status) => {\r\n        this.statuses = status;\r\n        for (let i = 0; i < this.statuses[0].length; i++) {\r\n          this.likeService.check(this.statuses[0][i].id, this.currentId).subscribe(data => {\r\n            this.statuses[0][i].isLiked = data;\r\n          }, error => (\r\n            console.log(\"err\", error)\r\n          ))\r\n        }\r\n      }, error => {\r\n        console.log(error)\r\n      })\r\n    }, error => {\r\n      console.log(error)\r\n    })\r\n    this.statusService.findAllByOwnerId(this.currentId).subscribe((status) => {\r\n      this.numberStatusOwner = status;\r\n    })\r\n    this.relationshipService.findAllFriendListByUserId(this.currentId).subscribe(data => {\r\n      this.numberFriend = data;\r\n      this.relationship = data;\r\n    })\r\n  }\r\n\r\n  getStatus(id) {\r\n    this.statusService.getById(id).subscribe(result => {\r\n      this.statusz = result[0][0];\r\n      for (let i = 0; i < result[1].length; i++) {\r\n        this.imgs.push(result[1][i].image)\r\n      }\r\n      console.log(this.imgs)\r\n    }, error => {\r\n      console.log(error);\r\n    })\r\n  }\r\n\r\n  resetValue() {\r\n    this.imgs = [];\r\n  }\r\n\r\n  editStatus() {\r\n    // @ts-ignore\r\n    const status: Status = {\r\n      content: this.statusForm.value.content,\r\n      status: this.statusForm.value.status,\r\n    }\r\n    console.log(status);\r\n    if (status.content == \"\" && this.imgs.length == 0) {\r\n\r\n    } else {\r\n      // @ts-ignore\r\n      this.statusService.edit(this.statusz.id, status).subscribe((data) => {\r\n        this.toast.success({detail: \"Thông Báo\", summary: \"Sửa bài đăng thành công\", duration: 3000})\r\n        window.setTimeout(function(){location.reload()},1500)\r\n        for (let item of this.imgs) {\r\n          const images = {\r\n            status: {\r\n              id: data.id\r\n            },\r\n            image: item\r\n          }\r\n          this.imageService.save(images).subscribe(() => {\r\n          });\r\n        }\r\n        this.statusForm.reset();\r\n        this.imgs = []\r\n        // this.reloadCurrentRoute()\r\n      }, error => {\r\n        console.log(error);\r\n      })\r\n    }\r\n  }\r\n\r\n  deleteImg(i: any) {\r\n    this.imgs.splice(i, 1)\r\n  }\r\n\r\n  reloadCurrentRoute() {\r\n    let currentUrl = this.router.url;\r\n    this.router.navigateByUrl('/', {skipLocationChange: true}).then(() => {\r\n      this.router.navigate([currentUrl]);\r\n    });\r\n  }\r\n\r\n  delete(id: any) {\r\n    this.statusService.delete(id).subscribe(() => {\r\n      this.toast.success({detail: \"Thông Báo\", summary: \"Xóa bài đăng thành công\", duration: 3000})\r\n      this.reloadCurrentRoute()\r\n    }, e => {\r\n      this.toast.error({detail: \"Thông Báo\", summary: \"Sửa bài đăng thất bại\", duration: 3000})\r\n      console.log(e);\r\n    });\r\n  }\r\n\r\n  likeStatus(id: any, index) {\r\n    this.likeService.likeStatus(id, this.currentId).subscribe(data => {\r\n      this.likeStatuses = data\r\n      this.statuses[0][index].isLiked = !this.statuses[0][index].isLiked\r\n      if (this.statuses[0][index].isLiked == true) {\r\n        this.statuses[2][index] += 1\r\n      } else {\r\n        this.statuses[2][index] -= 1\r\n      }\r\n    })\r\n  }\r\n\r\n  // upload ảnh\r\n  async upload() {\r\n    if (this.newSelectedImages.length !== 0) {\r\n      for (let i = 0; i < this.newSelectedImages.length; i++) {\r\n        let selectedImage = this.newSelectedImages[i];\r\n        var n = Date.now();\r\n        const filePath = `RoomsImages/${n}`;\r\n        const fileRef = this.storage.ref(filePath);\r\n        await this.storage.upload(filePath, selectedImage).snapshotChanges().pipe(\r\n          finalize(() => {\r\n            fileRef.getDownloadURL().subscribe(url => {\r\n              console.log(url);\r\n              this.imgs.push(url);\r\n            });\r\n          })\r\n        ).subscribe(() => {\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Chọn ảnh\r\n  selectFile(event: any) {\r\n    if (event.target.files && event.target.files[0]) {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      this.newSelectedImages = event.target.files;\r\n      for (let i = 0; i < event.target.files.length; i++) {\r\n        console.log(event.target.files[i])\r\n        this.selectedImages.push(event.target.files[i]);\r\n      }\r\n      //bi bo? qua\r\n      this.upload()\r\n    } else {\r\n      this.selectedImages = [];\r\n    }\r\n  }\r\n}\r\n","<main xmlns=\"http://www.w3.org/1999/html\">\r\n\r\n  <!-- Container START -->\r\n  <div class=\"container\">\r\n    <div class=\"row g-4\">\r\n\r\n      <!-- Sidenav START -->\r\n      <div class=\"col-lg-3\">\r\n\r\n        <!-- Navbar START-->\r\n        <nav class=\"navbar navbar-expand-lg mx-0\">\r\n          <div class=\"offcanvas offcanvas-start\" tabindex=\"-1\" id=\"offcanvasSideNavbar\">\r\n            <!-- Offcanvas header -->\r\n            <div class=\"offcanvas-header\">\r\n              <button type=\"button\" class=\"btn-close text-reset ms-auto\" data-bs-dismiss=\"offcanvas\"\r\n                      aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <!-- Offcanvas body -->\r\n            <div class=\"offcanvas-body d-block px-2 px-lg-0\">\r\n              <!-- Card START -->\r\n              <div class=\"card overflow-hidden\">\r\n                <!-- Cover image -->\r\n                <div class=\"h-50px\"\r\n                     style=\" background-position: center; background-size: cover; background-repeat: no-repeat;\"></div>\r\n                <!-- Card body START -->\r\n                <div class=\"card-body pt-0\">\r\n                  <div class=\"text-center\">\r\n                    <!-- Avatar -->\r\n                    <div class=\"avatar avatar-lg mt-n5 mb-3\">\r\n                      <a routerLink=\"/{{currentId}}\"><img class=\"avatar-img rounded border border-white border-3\"\r\n                                        src=\"{{avatar}}\" alt=\"\"></a>\r\n                    </div>\r\n                    <!-- Info -->\r\n                    <h5 class=\"mb-0\"><a routerLink=\"/{{currentId}}\">{{fullname}}</a></h5>\r\n                    <!-- User stat START -->\r\n                    <div style=\"margin-top: 5%\" class=\"hstack gap-2 gap-xl-3 justify-content-center\">\r\n                      <!-- User stat item -->\r\n                      <div>\r\n                        <h6 class=\"mb-0\">{{numberStatusOwner[0].length}}</h6>\r\n                        <small>Số bài đăng</small>\r\n                      </div>\r\n                      <!-- Divider -->\r\n                      <div class=\"vr\"></div>\r\n                      <!-- User stat item -->\r\n                      <div>\r\n                        <h6 class=\"mb-0\">{{numberFriend.length}}</h6>\r\n                        <small>Bạn bè</small>\r\n                      </div>\r\n                    </div>\r\n                    <!-- User stat END -->\r\n                  </div>\r\n\r\n                  <!-- Divider -->\r\n                  <hr>\r\n\r\n                  <!-- Side Nav START -->\r\n                  <ul class=\"nav nav-link-secondary flex-column fw-bold gap-2\">\r\n                    <li class=\"nav-item\">\r\n                      <a class=\"nav-link\" routerLink=\"/\"> <img class=\"me-2 h-20px fa-fw\"\r\n                                                                       src=\"assets/assets/images/icon/home-outline-filled.svg\"\r\n                                                                       alt=\"\"><span>Trang chủ </span></a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                      <a class=\"nav-link\" routerLink=\"/{{currentId}}/list-friend\"> <img class=\"me-2 h-20px fa-fw\"\r\n                                                                                   src=\"assets/assets/images/icon/person-outline-filled.svg\"\r\n                                                                                   alt=\"\"><span>Bạn bè </span></a>\r\n                    </li>\r\n\r\n                  </ul>\r\n                  <!-- Side Nav END -->\r\n                </div>\r\n                <!-- Card body END -->\r\n                <!-- Card footer -->\r\n                <div class=\"card-footer text-center py-2\">\r\n                  <a class=\"btn btn-link btn-sm\" routerLink=\"/{{currentId}}\">Đến trang cá nhân </a>\r\n                </div>\r\n              </div>\r\n              <!-- Card END -->\r\n            </div>\r\n          </div>\r\n        </nav>\r\n        <!-- Navbar END-->\r\n      </div>\r\n      <!-- Sidenav END -->\r\n\r\n      <!-- Main content START -->\r\n      <div class=\"col-md-8 col-lg-4 vstack gap-4\">\r\n        <app-status-create></app-status-create>\r\n        <div class=\"card\" *ngFor=\"let s of statuses[0],index as i\" style=\"margin-top: -2%\">\r\n          <!-- Card header START -->\r\n          <div *ngIf=\"!(currentId != s.owner.id && s.status == 2)\">\r\n            <div class=\"card-header border-0 pb-0\">\r\n              <div class=\"d-flex align-items-center justify-content-between\">\r\n                <div class=\"d-flex align-items-center\">\r\n                  <!-- Avatar -->\r\n                  <div class=\"avatar avatar-story me-2\">\r\n                    <a href=\"#!\"> <img class=\"avatar-img rounded-circle\" src=\"{{s.owner.avatar}}\" alt=\"\"> </a>\r\n                  </div>\r\n                  <!-- Info -->\r\n                  <div>\r\n                    <div class=\"nav nav-divider\">\r\n                      <h6 class=\"nav-item card-title mb-0\"><a routerLink=\"/{{s.owner.id}}\"> {{s.owner.fullname}} </a></h6>\r\n                      <span class=\"nav-item small\"> {{s.createAt | date: \"hh:mm dd/MM/yyyy\"}}</span>\r\n                    </div>\r\n                    <p class=\"mb-0 small\" *ngIf=\"s.status == 1\"><i class=\"fa-solid fa-globe\"></i> Công khai</p>\r\n                    <p class=\"mb-0 small\" *ngIf=\"s.status == 2\"><i class=\"fa-solid fa-lock\"></i> Chỉ mình tôi</p>\r\n                    <p class=\"mb-0 small\" *ngIf=\"s.status == 3\"><i class=\"fa-solid fa-user-group\"></i> Bạn bè</p>\r\n                  </div>\r\n                </div>\r\n                <!-- Card feed action dropdown START -->\r\n                <div class=\"dropdown\" *ngIf=\"currentId == s.owner.id\">\r\n                  <a href=\"#\" class=\"text-secondary btn btn-secondary-soft-hover py-1 px-2\" id=\"cardFeedAction1\"\r\n                     data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                    <i class=\"bi bi-three-dots\"></i>\r\n                  </a>\r\n                  <!-- Card feed action dropdown menu -->\r\n                  <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"cardFeedAction1\">\r\n                    <div>\r\n                      <li>\r\n                        <button class=\"dropdown-item\" data-bs-toggle=\"modal\" data-bs-target=\"#updateStatusModal\"\r\n                                (click)=\"getStatus(s.id)\"><i\r\n                          class=\"bi bi-pencil-fill pe-1\"></i> Sửa bài đăng\r\n                        </button>\r\n                      </li>\r\n                      <li>\r\n                        <hr class=\"dropdown-divider\">\r\n                      </li>\r\n                      <li>\r\n                        <button class=\"dropdown-item\" data-bs-toggle=\"modal\" data-bs-target=\"#modalDeleteStatus\"\r\n                                (click)=\"getStatus(s.id)\"><i class=\"fa-solid fa-trash\"></i> Xóa bài đăng\r\n                        </button>\r\n                      </li>\r\n                    </div>\r\n                  </ul>\r\n                </div>\r\n                <!-- Card feed action dropdown END -->\r\n              </div>\r\n            </div>\r\n            <!-- Card header END -->\r\n            <!-- Card body START -->\r\n            <div class=\"card-body\">\r\n              <p routerLink=\"/status/{{s.id}}\">{{s.content}}</p>\r\n              <!-- Card img -->\r\n              <div class=\"card-body position-relative pt-0\" routerLink=\"/status/{{s.id}}\">\r\n                <div class=\"row g-2\">\r\n                  <div *ngFor=\"let img of statuses[1][i]\" class=\"col-4\">\r\n                    <img class=\"rounded img-fluid\" src=\"{{img.image}}\">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <br>\r\n              <!-- Feed react START -->\r\n              <ul class=\"nav nav-pills nav-pills-light nav-fill nav-stack small border-top py-1\">\r\n                <li class=\"nav-item\" *ngIf=\"!s.isLiked\">\r\n                  <a class=\"nav-link mb-0\" (click)=\"likeStatus(s.id, i)\"><i class=\"bi bi-heart pe-1\"></i> Thích ({{statuses[2][i]}})</a>\r\n                </li>\r\n                <li class=\"nav-item\" *ngIf=\"s.isLiked\">\r\n                  <a class=\"nav-link mb-0\" style=\"color: red\" (click)=\"likeStatus(s.id, i)\"><i class=\"bi bi-heart pe-1\"></i> Thích ({{statuses[2][i]}})</a>\r\n                <li class=\"nav-item\">\r\n                  <a class=\"nav-link mb-0\" routerLink=\"/status/{{s.id}}\"> <i class=\"bi bi-chat-fill pe-1\"></i>Bình Luận <span *ngIf=\"currentId == s.owner.id\">({{statuses[3][i]}})</span></a>\r\n                </li>\r\n              </ul>\r\n              <!-- Feed react START -->\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Card body END -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Story END -->\r\n</main>\r\n<!-- Modal -->\r\n<div class=\"modal fade\" id=\"updateStatusModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n  <form [formGroup]=\"statusForm\" (ngSubmit)=\"editStatus()\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n      <div class=\"modal-content\">\r\n        <!-- Modal feed header START -->\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"modalLabelCreateFeed\">Sửa bài đăng</h5>\r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" (click)=\"resetValue()\"></button>\r\n        </div>\r\n        <!-- Modal feed header END -->\r\n\r\n        <!-- Modal feed body START -->\r\n        <div class=\"modal-body\">\r\n          <!-- Add Feed -->\r\n          <div class=\"d-flex mb-3\">\r\n            <!-- Avatar -->\r\n            <div class=\"avatar avatar-xs me-2\">\r\n              <img class=\"avatar-img rounded-circle\" src=\"{{statusz.owner.avatar}}\" alt=\"\">\r\n            </div>\r\n            <!-- Feed box  -->\r\n            <form class=\"w-100\">\r\n              <textarea class=\"form-control pe-4 fs-3 lh-1 border-0\" rows=\"4\" placeholder=\"Nội dung chỉnh sửa\"\r\n                        formControlName=\"content\"\r\n                        ngModel=\"{{statusz.content}}\"></textarea>\r\n            </form>\r\n          </div>\r\n          <!-- Feed rect START -->\r\n          <div class=\"hstack gap-2\">\r\n            <div class=\"card-body position-relative pt-0\">\r\n              <div class=\"row g-2\">\r\n                <!-- Photos item -->\r\n                <div class=\"col-12\" style=\"height: 150px; overflow: auto\">\r\n                  <img class=\"rounded img-fluid1 col-4\" *ngFor=\"let img of imgs;let i = index;\" src=\"{{img}}\" alt=\"\"\r\n                       style=\"height: 100%\" (click)=\"deleteImg(i)\">\r\n                  <!-- glightbox Albums left bar END  -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <br>\r\n          <div class=\"custom-file\">\r\n            <input type=\"file\"\r\n                   #userPhoto\r\n                   multiple\r\n                   (change)=\"selectFile($event)\"\r\n                   name=\"image\"\r\n                   autocomplete=\"off\" class=\"custom-file-input\" id=\"inputGroupFile03\"\r\n                   accept=\"image/png, image/gif, image/jpeg\">\r\n            <label class=\"custom-file-label\" for=\"inputGroupFile03\"><span\r\n              class=\"icon-md bg-success bg-opacity-10 text-success rounded-circle\" data-bs-toggle=\"tooltip\"\r\n              data-bs-placement=\"top\" title=\"Photo\"> <i class=\"bi bi-image-fill\"></i> </span></label>\r\n          </div>\r\n          <!-- Feed rect END -->\r\n        </div>\r\n        <!-- Modal feed body END -->\r\n\r\n        <!-- Modal feed footer -->\r\n        <div class=\"modal-footer row justify-content-between\">\r\n          <!-- Select -->\r\n          <div class=\"col-lg-4\">\r\n            <select id=\"oselect\" class=\"form-select js-choice\" data-position=\"top\" data-search-enabled=\"false\"\r\n                    formControlName=\"status\" ngModel=\"{{statusz.status}}\">\r\n              <option value=\"1\">Công khai</option>\r\n              <option value=\"2\">Chỉ mình tôi</option>\r\n              <option value=\"3\">Bạn bè</option>\r\n            </select>\r\n          </div>\r\n          <!-- Button -->\r\n          <div class=\"col-lg-7 text-sm-end\">\r\n            <button type=\"submit\" class=\"btn btn-primary-soft\" data-bs-dismiss=\"modal\">Lưu thay đổi</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n\r\n<!-- Modal unfriend START -->\r\n<div class=\"modal fade\" id=\"modalDeleteStatus\" tabindex=\"-1\" aria-labelledby=\"modalLabelUnfriend\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n    <div class=\"modal-content\">\r\n      <!-- Modal feed header START -->\r\n      <div class=\"modal-header\">\r\n        <h3 id=\"modalLabelUnfriend\" style=\"text-align: center\">Bạn muốn xóa bài đăng</h3>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <h6>Bạn có chắc chắn muốn xóa bài đăng không?</h6>\r\n      </div>\r\n      <!-- Button -->\r\n      <div class=\"modal-footer\">\r\n        <div class=\"col-lg-8 text-sm-end\">\r\n          <button type=\"button\" class=\"btn btn-primary-soft me-2\" (click)=\"delete(statusz.id)\" data-bs-dismiss=\"modal\">\r\n            Xác nhận\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-danger-soft\" data-bs-dismiss=\"modal\" aria-label=\"Close\">Hủy\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- **************** MAIN CONTENT END **************** -->\r\n\r\n"]},"metadata":{},"sourceType":"module"}